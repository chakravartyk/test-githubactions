name: 'test conditional'
on:
  workflow_dispatch:
    inputs:
      tfenv:
        description: 'Environment to run terrafom tfstate'
        required: true
        type: choice
        options:
        - pilot1
        - pilot2
        - pilot3

permissions:
  contents: read

jobs:
  terraform:
    name: 'TerraformBastion'
    runs-on: ubuntu-latest
    environment: gcp

    steps:
    - name: Checkout
      uses: actions/checkout@v3

    - name: Read input key file
      id: getinput
      run: echo "$(cat keyfile.yaml)" >> $GITHUB_OUTPUT

    - name: Test Input
      run: echo ${{ steps.getinput.outputs }}.${{ inputs.tfenv }}